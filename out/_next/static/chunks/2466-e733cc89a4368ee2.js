"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2466],{25429:function(l,i){i.Z={src:"/_next/static/media/star-review.f108bfd9.png",height:80,width:80,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAhFBMVEXueCLueCHseSDteCHudyLudyHfdxzudyHueCHudyHudyLudyHvdyHueCHudyHudyHueCHudyHvdyLudyHveCLvdyLudyHueCLudyLudyHudyHueCHueCHveCLudyHudyHveCLudyHudyHudyLudyHudyHudyHudyHudyHudyHudyHudyFu8fnrAAAALHRSTlMAAAAAAAAAAgMGCgoNDxAREx4kMDEzODpFS09QU1dXWFlaW3V4f4OGj5ScwXwdsYcAAABGSURBVHjaBUCFEYAgAHzUtxu7wZb99/NAT+S58CyQvG7SRpSt+6ELH71RcaAXF1CTqOatBtPT6Z53BKWR7TcEYNGIpAz5A5k7BJVmFm1XAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},76753:function(l,i,n){n.d(i,{Z:function(){return H}});var d=n(85893),o=n(67294),u=n(82473),e=n(51126),t=n(88767),a=n(31003),v=n(22400),r=n(25617),s=n(81982),c=n(74931),m=n(46147),A=n(81810);n(32849);var h=n(75904);let y=async l=>{let{data:i}=await h.Z.post("api/v1/customer/cart/add-multiple ",{item_list:l});return i};var f=n(60993),p=n(7628);n(30204);var g=n(86049),H=l=>{let{orderData:i,orderZoneId:n}=l,{cartList:h}=(0,r.v9)(l=>l.cart),H=(0,r.I0)(),{mutate:E}=(0,g.Z)(),{mutate:C,isLoading:_}=(0,t.useMutation)("add-items",y),b=()=>{let l=[];return null==i||i.forEach(i=>{l=[...l,null==i?void 0:i.food_id]}),l},{data:S,mutate:L,isLoading:q}=(0,t.useMutation)("food-lists",a.R.foodLists);(0,o.useEffect)(()=>{L(JSON.stringify(b()),{onError:v.R})},[i]);let R=(l,i)=>{let n=0,d=0;return(null==i?void 0:i.length)>0&&(null==l?void 0:l.length)>0&&(null==i||i.forEach(l=>{(null==l?void 0:l.required)==="on"&&n++}),null==l||l.forEach(l=>{(null==l?void 0:l.required)==="on"&&d++})),n===d},x=(l,i)=>{let n=0;return null==i||i.forEach(i=>{(null==l?void 0:l.find(l=>(null==l?void 0:l.label)===(null==i?void 0:i.label)))&&n++}),i.length===n},w=(l,i)=>{let n=[];return null==l||l.forEach(l=>{if((null==l?void 0:l.variations.length)>0){var d;null==l||null===(d=l.variations)||void 0===d||d.forEach(d=>{null==i||i.forEach(i=>{var o,u;(null==i?void 0:null===(o=i.variation)||void 0===o?void 0:o.length)>0&&R(null==l?void 0:l.variations,null==i?void 0:i.variation)&&(null==i||null===(u=i.variation)||void 0===u||u.forEach(i=>{var o;(null==i?void 0:null===(o=i.values)||void 0===o?void 0:o.length)>0?(null==d?void 0:d.name)===(null==i?void 0:i.name)&&(x(null==d?void 0:d.values,null==i?void 0:i.values),n.push(l)):(null==d?void 0:d.name)===(null==i?void 0:i.name)&&n.push(l)}))})})}else n.push(l)}),[...new Set(n)]},I=(l,i,n,d)=>null==i?void 0:i.map((i,o)=>(null==n?void 0:n.find(l=>(null==l?void 0:l.label)===(null==i?void 0:i.label)))?{...i,isSelected:!0,choiceIndex:l,optionIndex:o,type:"on"===d?"required":"optional"}:i),N=(l,i)=>(null==i?void 0:i.length)>0?null==l?void 0:l.map((l,n)=>{let d=i.find(i=>i.max===l.max&&i.min===l.min&&i.name===l.name&&i.required===l.required&&i.type===l.type);return d?{...l,values:I(n,null==l?void 0:l.values,null==d?void 0:d.values,null==d?void 0:d.required)}:l}):l,T=l=>{if(l){let i=null==l?void 0:l.map(l=>{var i,n,d,o,u,e,t,a,v,r;return{...null==l?void 0:l.item,cartItemId:null==l?void 0:l.id,variations:null==l?void 0:null===(i=l.item)||void 0===i?void 0:i.variations,quantity:null==l?void 0:l.quantity,totalPrice:(0,s.Tx)(null==l?void 0:null===(n=l.item)||void 0===n?void 0:n.discount,null==l?void 0:null===(d=l.item)||void 0===d?void 0:d.discount_type,(0,s.EN)(null==l?void 0:l.item),null==l?void 0:null===(o=l.item)||void 0===o?void 0:o.restaurant_discount)*(null==l?void 0:l.quantity),selectedAddons:(0,f.o)(null==l?void 0:null===(u=l.item)||void 0===u?void 0:u.addons),itemBasePrice:(0,s.Tx)(null==l?void 0:null===(e=l.item)||void 0===e?void 0:e.discount,null==l?void 0:null===(t=l.item)||void 0===t?void 0:t.discount_type,(0,s.c4)(null==l?void 0:l.item,null==l?void 0:null===(a=l.item)||void 0===a?void 0:a.variations),null==l?void 0:null===(v=l.item)||void 0===v?void 0:v.restaurant_discount),selectedOptions:(0,f.Ap)(null==l?void 0:null===(r=l.item)||void 0===r?void 0:r.variations)}});H((0,m.mV)(i)),c.Am.success((0,e.t)("Reorder-able items added to the cart successfully."))}},B=()=>{let l=JSON.parse(localStorage.getItem("zoneid"));if((null==l?void 0:l.length)>0&&l.find(l=>l===n)){let l=w(null==S?void 0:S.data,i);if((null==l?void 0:l.length)>0){let n=l.map(l=>{let n=[];if(null==i||i.forEach(i=>{var d,o,u;let e=0;null==i||null===(o=i.food_details)||void 0===o||null===(d=o.variations)||void 0===d||d.forEach((i,n)=>{var d;(null==i?void 0:i.name)===(null==l?void 0:null===(d=l.variations[n])||void 0===d?void 0:d.name)&&e++}),e===(null==l?void 0:null===(u=l.variations)||void 0===u?void 0:u.length)&&n.push(i)}),(null==n?void 0:n.length)>0){var d,o,u,e,t,a,v,r,c;let i=[],m=N(l.variations,null==n?void 0:null===(d=n[0])||void 0===d?void 0:d.variation);(null==m?void 0:m.length)>0&&(null==m||m.forEach(l=>{var n,d;(null==l?void 0:null===(n=l.values)||void 0===n?void 0:n.length)>0&&(null==l||null===(d=l.values)||void 0===d||d.forEach(l=>{(null==l?void 0:l.isSelected)&&i.push(l)}))}));let h=0;(null==i?void 0:i.length)>0&&(null==i||i.forEach(l=>{h+=Number.parseInt(null==l?void 0:l.optionPrice)}));let y=(0,s.Tx)(null==l?void 0:l.discount,null==l?void 0:l.discount_type,(0,s.c4)(l,i),null==l?void 0:l.restaurant_discount);return null==n||null===(o=n[0])||void 0===o||o.quantity,{model:l.available_date_starts?"ItemCampaign":"Food",add_on_ids:(null==l?void 0:null===(u=l.add_on)||void 0===u?void 0:u.length)>0?null==l?void 0:null===(e=l.add_on)||void 0===e?void 0:e.map(l=>l.id):[],add_on_qtys:(null==l?void 0:null===(t=l.add_on)||void 0===t?void 0:t.length)>0?null==l?void 0:null===(a=l.add_on)||void 0===a?void 0:a.map(l=>l.quantity):[],item_id:null==l?void 0:l.id,price:y,quantity:null==n?void 0:null===(v=n[0])||void 0===v?void 0:v.quantity,variations:null===(r=N(l.variations,null==n?void 0:null===(c=n[0])||void 0===c?void 0:c.variation))||void 0===r?void 0:r.map(l=>({name:l.name,values:{label:(0,A.r)(l.values)}}))}}});(null==n?void 0:n.length)>0&&(null==n?void 0:n.every(l=>void 0!==l))&&C(n,{onSuccess:T,onErrorResponse:v.R})}else c.Am.error((0,e.t)("Current orders can not be reordered as some changes occurred to the items."))}else c.Am.error((0,e.t)("This order can not be reordered as the restaurant is not existing in your current zone."))},F=async()=>{(null==h?void 0:h.length)>0&&(await H((0,m.aE)()),await E((0,p.P)(),{onError:v.R})),B()};return(0,d.jsx)(u.K,{variant:"contained",onClick:F,disabled:!S,children:(0,e.t)("Reorder")})}}}]);