"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1389],{57705:function(e,t,a){var i=a(85893),l=a(67294),r=a(11163),n=a(66720);let s=e=>{let{children:t}=e,a=(0,r.useRouter)(),[s,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(!a.isReady)return;let e=JSON.parse(localStorage.getItem("zoneid"));(null==e?void 0:e.length)>0?o(!0):a.push("/")},[a.isReady]),s)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.ZP,{}),t]}):null};s.propTypes={},t.Z=s},42974:function(e,t,a){a.d(t,{Z:function(){return R}});var i=a(85893),l=a(67294),r=a(88767),n=a(30422);a(9945);var s=a(11163),o=a(25617),u=a(7036),d=a(86886),v=a(26447),c=a(82473),f=a(55540),g=a(16338),p=a(18651),h=a(61929),m=a(25137),_=a(48082);a(72679);let x=e=>{var t,a,l,r,n,s;let{searchValue:o,count:x,foodOrRestaurant:y,setFoodOrRestaurant:j,data:b,isLoading:S,offset:w,page_limit:Z,setOffset:A,global:E,handleFilter:N,handleClearAll:R,isNetworkCalling:F,popularFoodisLoading:B,restaurantIsLoading:O,page:L,restaurantType:P,totalData:M}=e;return(0,h.Z)(),(0,i.jsx)(u.Xw,{spacing:2,sx:{minHeight:"53vh",marginTop:L||P?"0px":"20px"},children:(0,i.jsxs)(d.ZP,{container:!0,gap:"15px",children:[(0,i.jsx)(d.ZP,{item:!0,xs:12,sm:12,md:12,align:"center",children:!L&&!P&&(0,i.jsx)(c.Z,{foodOrRestaurant:y,setFoodOrRestaurant:j})}),(0,i.jsxs)(d.ZP,{item:!0,xs:12,sm:12,md:12,container:!0,spacing:2,paddingTop:"1rem",children:[("products"===y||L)&&(0,i.jsx)(i.Fragment,{children:S||F?(0,i.jsxs)(v.Z,{width:"100%",minHeight:"500px",children:[" ",(0,i.jsx)(m.P,{align:"center"})]}):(0,i.jsxs)(i.Fragment,{children:[(null==b?void 0:null===(a=b.data)||void 0===a?void 0:null===(t=a.products)||void 0===t?void 0:t.length)>0&&(0,i.jsx)(f.Z,{product_list:null==b?void 0:b.data,offset:w,page_limit:Z,setOffset:A}),(null==b?void 0:null===(r=b.data)||void 0===r?void 0:null===(l=r.products)||void 0===l?void 0:l.length)===0&&(0,i.jsx)(p.Z,{label:"No food found",image:_.ZP})]})}),"restaurants"===y&&(0,i.jsx)(i.Fragment,{children:S||F?(0,i.jsxs)(v.Z,{width:"100%",minHeight:"500px",children:[" ",(0,i.jsx)(m.P,{align:"center"})]}):(0,i.jsxs)(i.Fragment,{children:[b&&!S&&(0,i.jsx)(g.Z,{resData:b,offset:w,page_limit:Z,setOffset:A,global:E,restaurantType:P}),(null==b?void 0:null===(s=b.data)||void 0===s?void 0:null===(n=s.restaurants)||void 0===n?void 0:n.length)===0&&(0,i.jsx)(p.Z,{label:"No restaurant found",image:_.HV})]})})]})]})})};x.propTypes={};var y=a(81982),j=a(30381),b=a.n(j);let S=(e,t,a)=>{var i,l,r,n,s,o,u;let d="products"===a?null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.products:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.restaurants;return d&&d.length>0&&(""!==e.rating&&(d=d.filter(t=>Number(t.avg_rating)>=Number(e.rating))),(null==e?void 0:null===(r=e.filterBy)||void 0===r?void 0:r.popular)&&(d=null==d?void 0:d.sort((e,t)=>Number(t.order_count)-Number(e.order_count)).slice(0,16)),(null==e?void 0:null===(n=e.filterBy)||void 0===n?void 0:n.most_reviewed)&&(d=null===(u=d.slice(0,16))||void 0===u?void 0:u.sort((e,t)=>Number(t.rating_count)-Number(e.rating_count)).slice(0,16)),(null==e?void 0:null===(s=e.filterBy)||void 0===s?void 0:s.new)&&(d=d.map(e=>({...e,created_at:b()(e&&e.created_at||null,"YYYY-MM-DD hh:mm A")})).sort((e,t)=>t.created_at-e.created_at).map(e=>{var t;return{...e,created_at:null===(t=e.created_at)||void 0===t?void 0:t.format("YYYY-MM-DD hh:mm A")}}).slice(0,16)),(null==e?void 0:null===(o=e.filterByCuisine)||void 0===o?void 0:o.length)>0&&(d=null==d?void 0:d.filter(t=>{var a;return null===(a=t.cuisine)||void 0===a?void 0:a.find(t=>{var a;return null==e?void 0:null===(a=e.filterByCuisine)||void 0===a?void 0:a.includes(null==t?void 0:t.name)})})),!e.filterBy.veg&&e.filterBy.nonVeg&&(d=d.filter(e=>0===e.veg)),!e.filterBy.nonVeg&&e.filterBy.veg&&(d=d.filter(e=>1===e.veg)),e.filterBy.currentlyAvailable&&(d=d.filter(e=>"products"===a?(0,y._e)(e.available_time_starts,e.available_time_ends):(null==e?void 0:e.active)&&(null==e?void 0:e.open)===1)),"products"===a&&""!==e.price&&(d=d.filter(t=>Math.floor(t.price)>=Math.floor(e.price[0])&&Math.floor(t.price)<=Math.floor(e.price[1])))),d};var w=a(46089),Z=a(22400);a(40795);var A=a(57849);a(90806);var E=a(36732),N=a(19076),R=e=>{let{product_type:t,configData:a,query:d,page:v,restaurantType:c,tags:f}=e,g=(0,o.I0)(),{global:p}=(0,o.v9)(e=>e.globalSettings),h=(0,s.useRouter)(),[m,_]=(0,l.useState)("all"),{searchTagData:y,selectedValue:j,selectedName:b}=(0,o.v9)(e=>e.searchTags),[R,F]=(0,l.useState)(15),[B,O]=(0,l.useState)(1),[L,P]=(0,l.useState)(""),{filterData:M,foodOrRestaurant:Y}=(0,o.v9)(e=>e.searchFilterStore),[D,T]=(0,l.useState)(!1),[V,z]=(0,l.useState)({}),[C,k]=(0,l.useState)({}),[H,I]=(0,l.useState)(null),Q=y.filter(e=>!0===e.isActive),q="products"===Y?"products-search":"restaurant-search",W=e=>{var t,a,i;c?(g((0,E.fL)("restaurants")),z({...e,data:{...e,restaurants:e.data,total_size:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.length}}),k({...e,data:{...e,restaurants:e.data,total_size:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.length}})):(v&&g((0,E.fL)("restaurants")),z(e),k(e)),I(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.total_size)},{isLoading:X,data:G,isError:J,error:K,refetch:U,isRefetching:$}=(0,r.useQuery)([q,Y,L,B,R],()=>n.qO.productSearch(Y,L,B,R,M),{retry:1,enabled:!1,onSuccess:W,onError:Z.R}),{isLoading:ee,data:et,refetch:ea}=(0,r.useQuery)(["popular-food",B,R,m],()=>n.qO.products(v,B,R,m),{enabled:!1,onSuccess:W}),{isLoading:ei,data:el,refetch:er}=(0,r.useQuery)(["restaurant-list",c],()=>A.G.typeWiseRestaurantList({restaurantType:c,type:m}),{enabled:!1,onSuccess:W,onError:Z.R});if((0,l.useEffect)(()=>{void 0!==c&&er()},[c,B]),(0,l.useEffect)(()=>{void 0!==v&&ea()},[v,B]),(0,l.useEffect)(()=>{d||v||c?P(d):f?P(null):h.push("/home")},[d,f]),(0,l.useEffect)(()=>{(null==Q?void 0:Q.length)!==0||d||v||c||L||h.push("/home")},[y]),(0,l.useEffect)(()=>{L?U():f&&v?U():f&&(null==Q?void 0:Q.length)>0&&U()},[L,M,f,B]),(0,l.useEffect)(()=>{O(1),void 0!==L&&U()},[Y]),J)return(0,i.jsx)("h1",{children:K.messages});(0,l.useEffect)(()=>{es()},[D]);let en=async()=>{await U()},es=()=>{let e=S(M,C,Y);z({...C,data:"products"===Y?{...null==V?void 0:V.data,products:e,total_size:null==e?void 0:e.length}:{...V.data,restaurants:e,total_size:null==e?void 0:e.length}})};return(0,l.useEffect)(()=>{let e="most-reviewed"===v?"rating":v,t="latest"===c?"new_arrivals":c,a=y.map(a=>a.value===(e||t)?{...a,isActive:!0}:a);g((0,N.WK)(a))},[v,c]),(0,l.useEffect)(()=>{O(1)},[y,b,L]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.Z,{title:"".concat(L||"Searching..."," on ").concat(null==a?void 0:a.business_name)}),(0,i.jsx)(u.Xw,{mb:"5rem",sx:{minHeight:"70vh"},children:V&&(0,i.jsx)(x,{searchValue:L,foodOrRestaurant:Y,setFoodOrRestaurant:E.fL,isLoading:X,isNetworkCalling:$,data:V,page_limit:R,offset:B,setOffset:O,global:p,handleFilter:()=>{T(e=>!e)},handleClearAll:en,page:"most-reviewed"===v?"most_reviewed":v,popularFoodisLoading:ee,restaurantType:c,restaurantIsLoading:ei,totalData:H})})]})}},90806:function(e,t,a){a.d(t,{P:function(){return l}});var i=a(51126);let l=[{id:1,name:(0,i.t)("Sort by"),value:"sort_by",isActive:!1},{id:0,name:(0,i.t)("Veg"),value:"veg",isActive:!1},{id:2,name:(0,i.t)("Non-Veg"),value:"nonVeg",isActive:!1},{id:3,name:(0,i.t)("Ratings 4 +"),value:"rating",isActive:!1},{id:4,name:"New Arrivals",value:"new_arrivals",isActive:!1},{id:5,name:"Discounted",value:"discounted",isActive:!1},{id:6,name:"Popular",value:"popular",isActive:!1}]}}]);