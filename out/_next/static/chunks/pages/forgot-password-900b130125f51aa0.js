(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9742],{91686:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgot-password",function(){return s(70931)}])},70931:function(e,r,s){"use strict";s.r(r),s.d(r,{__N_SSP:function(){return O},default:function(){return B}});var o=s(85893),n=s(67294),t=s(99226),a=s(7036),i=s(47312),d=s(26447),l=s(15861),c=s(87109),u=s(93946),m=s(82580),h=s(26793),p=s(25617),x=s(83287),w=s(75904),j=s(88767);let Z=async e=>{let{data:r}=await w.Z.post("/api/v1/auth/forgot-password",e);return r},f=e=>{let{onSuccessHandlerForForgotpass:r,onErrorResponse:s}=e;return(0,j.useMutation)("forgot_password",Z,{onSuccess:r,onError:s})};var g=s(74231),_=s(74931),b=s(22400),v=s(94054),S=s(49003),y=e=>{let{data:r,goNext:s,handleFirstForm:w}=e,{t:j}=(0,h.$)(),{global:Z,token:y}=(0,p.v9)(e=>e.globalSettings),C=(0,m.TA)({initialValues:{email:r?r.email:""},validationSchema:g.Ry({email:g.Z_().required(j("Please give a email number")).min(10,"number must be 10 digits")}),onSubmit:async(e,r)=>{try{F(e)}catch(e){}}}),P=e=>{e&&(s(),_.ZP.success(e.message))},{mutate:k,isLoading:E}=f({onSuccessHandler:P,onError:e=>{(0,b.R)(e)}}),F=e=>{w(e),k(e,{onSuccess:P,onError:b.R})},[N,A]=(0,n.useState)(!1);return JSON.parse(localStorage.getItem("userDatafor")),(0,o.jsx)(t.Z,{children:(0,o.jsxs)(a.Xw,{children:[(0,o.jsx)(d.Z,{children:(0,o.jsx)(l.Z,{children:j("Please enter your register Mobile Number")})}),(0,o.jsx)(d.Z,{mt:"2rem",padding:"0 20px",children:(0,o.jsxs)("form",{onSubmit:C.handleSubmit,children:[(0,o.jsx)(a.Xw,{children:(0,o.jsxs)(v.Z,{variant:"outlined",fullWidth:!0,children:[(0,o.jsx)(i.Z,{required:!0,sx:{color:e=>e.palette.neutral[600],fontSize:"14px"},htmlFor:"outlined-adornment-email",children:j("email")}),(0,o.jsx)(S.A,{required:!0,type:N?"text":"email",id:"email",name:"email",placeholder:j("Enter your email"),value:C.values.email,onChange:C.handleChange,error:C.touched.email&&!!C.errors.email,helperText:C.touched.email&&C.errors.email,touched:C.touched.email,endAdornment:(0,o.jsx)(c.Z,{position:"end"}),startAdornment:(0,o.jsx)(c.Z,{position:"start",sx:{marginInlineEnd:"0px !important"},children:(0,o.jsx)(u.Z,{"aria-label":"toggle email visibility",edge:"start"})}),label:"email"}),C.errors.email&&(0,o.jsx)(CustomTypography,{variant:"subtitle2",sx:{color:e=>e.palette.error.main},children:C.errors.email})]})}),(0,o.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},loading:E,children:j("Next")})]})})]})})},C=s(30968),P=s(57709),k=s(72450),E=s(22961),F=s(56815),N=s(93186);let A=async e=>{let{data:r}=await w.Z.put("/api/v1/auth/reset-password",e);return r},T=(e,r)=>(0,j.useMutation)("reset_password",A,{onSuccess:e,onError:b.f});var q=s(11163),W=e=>{let{data:r,goBack:s}=e,[p,w]=(0,n.useState)(!1),[j,Z]=(0,n.useState)(!1),{t:f}=(0,h.$)(),b=(0,q.useRouter)(),S=(0,m.TA)({initialValues:{reset_token:r.reset_token,phone:r.phone,password:"",confirm_password:""},validationSchema:g.Ry({password:g.Z_().required(f("No password provided.")).min(6,f("Password is too short - should be 6 chars minimum.")),confirm_password:g.Z_().required(f("No Confirm Password provided.")).oneOf([g.iH("password"),null],f("Passwords must match"))}),onSubmit:async(e,r)=>{try{A(e)}catch(e){}}}),y=e=>{e&&(_.ZP.success(e.message),b.push("/home"))},{mutate:C,isLoading:N}=T(y),A=e=>{C(e,{onSuccess:y})};return(0,o.jsx)(t.Z,{children:(0,o.jsxs)(a.Xw,{children:[(0,o.jsx)(d.Z,{children:(0,o.jsx)(l.Z,{children:f("Enter your new password")})}),(0,o.jsxs)(d.Z,{mt:"2rem",padding:"0 20px",children:[(0,o.jsxs)("form",{noValidate:!0,onSubmit:S.handleSubmit,children:[(0,o.jsxs)(v.Z,{sx:{mt:2},variant:"outlined",fullWidth:!0,children:[(0,o.jsx)(i.Z,{htmlFor:"outlined-adornment-password",children:f("Password")}),(0,o.jsx)(P.Z,{require:!0,type:p?"text":"password",id:"password",name:"password",value:S.values.password,onChange:S.handleChange,error:S.touched.password&&!!S.errors.password,helperText:S.touched.password&&S.errors.password,touched:S.touched.password,endAdornment:(0,o.jsx)(c.Z,{position:"end",children:(0,o.jsx)(u.Z,{"aria-label":"toggle password visibility",onClick:()=>w(e=>!e),edge:"end",children:p?(0,o.jsx)(k.Z,{}):(0,o.jsx)(E.Z,{})})}),label:f("Password")}),S.errors.password&&(0,o.jsx)(F.Z,{sx:{color:"#FF686A"},children:S.errors.password})]}),(0,o.jsxs)(v.Z,{sx:{mt:2},variant:"outlined",fullWidth:!0,children:[(0,o.jsx)(i.Z,{htmlFor:"outlined-adornment-password",children:f("Confirm Password")}),(0,o.jsx)(P.Z,{require:!0,type:j?"text":"password",id:"confirm_password",name:"confirm_password",value:S.values.confirm_password,onChange:S.handleChange,error:S.touched.confirm_password&&!!S.errors.confirm_password,helperText:S.touched.confirm_password&&S.errors.confirm_password,touched:S.touched.confirm_password,endAdornment:(0,o.jsx)(c.Z,{position:"end",children:(0,o.jsx)(u.Z,{"aria-label":"toggle password visibility",onClick:()=>Z(e=>!e),edge:"end",children:j?(0,o.jsx)(k.Z,{}):(0,o.jsx)(E.Z,{})})}),label:f("Confirm Password")}),S.errors.confirm_password&&(0,o.jsx)(F.Z,{sx:{color:"#FF686A"},children:S.errors.confirm_password})]}),(0,o.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:f("Done")})]}),(0,o.jsx)(x.Z,{onClick:s,fullWidth:!0,variant:"contained",sx:{mb:2},children:f("Back")})]})]})})},R=()=>{let[e,r]=(0,n.useState)(0),[s,i]=(0,n.useState)({phone:"",otp:""}),d=()=>{r(e=>e+1)},l=()=>{r(e=>e-1)},c=e=>{i({phone:e.phone,reset_token:e.reset_token})},u=e=>{e&&d()},{mutate:m,isLoading:h}=(0,N.Y)(u);return(0,o.jsx)(t.Z,{minHeight:"50vh",marginTop:"200px",children:(0,o.jsx)(a.E4,{children:(0,o.jsx)(a.J8,{elevation:5,children:0===e?(0,o.jsx)(y,{goNext:d,handleFirstForm:c,data:s}):1===e?(0,o.jsx)(C.Z,{data:s,goBack:l,formSubmitHandler:e=>{c(e),m(e,{onSuccess:u})},isLoading:h}):(0,o.jsx)(W,{data:s,handleFirstForm:c,goBack:l})})})})};s(55720);var X=s(46089),O=!0,B=e=>{let{configData:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.Z,{title:"Forgot Password - ".concat(null==r?void 0:r.business_name)}),(0,o.jsx)(R,{})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=91686)}),_N_E=e.O()}]);