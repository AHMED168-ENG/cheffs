(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5065],{43053:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/info/loyality/LoyalityModal",function(){return e(4650)}])},97618:function(t,n,e){"use strict";e.d(n,{Do:function(){return l},OC:function(){return u}});var o=e(90948),i=e(99226),a=e(66242),r=e(15861);(0,o.ZP)(i.Z)(()=>({maxWidth:"345px",height:"176px",borderRadius:"10px",padding:"20px"})),(0,o.ZP)(a.Z)(()=>({paddingTop:"40px",background:"#FBFBFB",borderRadius:"10px",padding:"20px"}));let l=(0,o.ZP)(i.Z)(t=>{let{theme:n}=t;return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:n.palette.background.paper,boxShadow:24,padding:"32px",width:"20%",[n.breakpoints.down("md")]:{width:"80%"}}}),u=(0,o.ZP)(r.Z)(t=>{let{theme:n}=t;return{zIndex:999,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:n.palette.whiteContainer.main,fontSize:"15px"}})},30216:function(t,n,e){"use strict";e.d(n,{_:function(){return i}});var o=e(75904);let i={loayalityList:t=>o.Z.get("/api/v1/customer/loyalty-point/transactions?offset=".concat(t,"&limit=10")),loyalityToWallet:t=>o.Z.post("/api/v1/customer/loyalty-point/point-transfer",t)}},4650:function(t,n,e){"use strict";e.r(n);var o=e(85893);e(67294);var i=e(11994),a=e(15861),r=e(26447),l=e(50135),u=e(11057),s=e(26793),d=e(25617),c=e(82580),p=e(88767),m=e(74931),h=e(30216),y=e(74231),f=e(97618),_=e(7036),v=e(81982),x=e(22400),b=e(61929);n.default=t=>{let n,e,g,{setLoyalityModal:Z,loyalitydata:w,refetch:j,profileRefatch:C,loyalityModal:S}=t,k=(0,b.Z)(),{global:P}=(0,d.v9)(t=>t.globalSettings);P&&(n=null==P?void 0:P.currency_symbol,e=null==P?void 0:P.currency_symbol_direction,g=null==P?void 0:P.digit_after_decimal_point);let{t:T}=(0,s.$)(),E=(0,c.TA)({initialValues:{point:w||0},validationSchema:y.Ry({point:y.Rx().required("Please give an amount")}),onSubmit:async(t,n)=>{if(t.point<=w&&t.point>=(null==P?void 0:P.loyalty_point_exchange_rate)){if(t.point<(null==P?void 0:P.minimum_point_to_transfer))m.Am.error("Please exchange more than ".concat(null==P?void 0:P.minimum_point_to_transfer," points"));else try{A(t)}catch(t){}}else m.Am.error("insufficient amount")}}),A=t=>{N(t,{onSuccess:async t=>{var n,e,o;203===t.status?null==t||null===(e=t.data)||void 0===e||null===(n=e.errors)||void 0===n||n.forEach(t=>m.Am.error(t.message)):(m.Am.success(null==t?void 0:null===(o=t.data)||void 0===o?void 0:o.message),Z(!1),await j(),await C())},onError:x.R})},{mutate:N,isLoading:R,error:B}=(0,p.useMutation)("loyalityToWallet",h._.loyalityToWallet),F=T("points");return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.Z,{open:S,onClose:()=>{Z(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsxs)(f.Do,{children:[(0,o.jsx)(a.Z,{variant:"h5",align:"center",mb:".5rem",color:k.palette.neutral[1e3],children:T("Your loyalty point will convert to currency and transfer to wallet")}),(0,o.jsx)(_.i5,{align:"center",variant:"h5",color:"primary.main",children:"".concat(null==P?void 0:P.loyalty_point_exchange_rate," ").concat(F," = ").concat((0,v.Bg)(1,e,n,g))}),(0,o.jsx)(r.Z,{mt:"1rem",children:(0,o.jsxs)("form",{noValidate:!0,onSubmit:E.handleSubmit,children:[(0,o.jsx)(l.Z,{required:!0,type:"number",sx:{width:"100%",color:t=>t.palette.neutral[1e3]},id:"outlined-basic",label:T("Amount"),variant:"outlined",name:"point",value:E.values.point,onChange:E.handleChange,defaultValue:E.values.point,error:E.touched.point&&!!E.errors.point,helperText:E.touched.point&&E.errors.point}),(0,o.jsx)(r.Z,{justifyContent:"center",mt:"1rem",children:(0,o.jsx)(u.Z,{variant:"contained",type:"submit",children:T("Submit")})})]})})]})})})}}},function(t){t.O(0,[2888,9774,179],function(){return t(t.s=43053)}),_N_E=t.O()}]);